<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CV - Your Name</title>
    <!-- Include PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
      .container {
        max-width: 1000px;
        margin: 2rem auto;
        padding: 0 1rem;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }
      .pdf-container {
        width: 100%;
        height: 800px;
        margin: 1rem 0;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: #525659;
      }
      #pdf-canvas {
        border-radius: 4px;
      }
      .download-button {
        display: inline-block;
        padding: 0.5rem 1rem;
        background-color: #0366d6;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin: 1rem 0;
      }
      .download-button:hover {
        background-color: #0255b3;
      }
      .accessibility-info {
        color: #666;
        font-size: 0.9rem;
        margin: 1rem 0;
      }
      #error-message {
        display: none;
        padding: 1rem;
        background-color: #fff;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Curriculum Vitae</h1>
      <!-- PDF Viewer -->
      <div class="pdf-container" id="pdf-container">
        <div id="error-message">
          <p>Unable to display PDF. You can download it instead:</p>
          <a href="assets/pdf/cv.pdf" class="download-button">Download PDF</a>
        </div>
        <canvas id="pdf-canvas"></canvas>
      </div>

      <!-- Download Option -->
      <div>
        <a
          href="assets/pdf/cv.pdf"
          class="download-button"
          download="cv.pdf"
          aria-label="Download CV as PDF"
        >
          Download PDF Version
        </a>
      </div>
      <!-- Accessibility Information -->
      <div class="accessibility-info">
        <p>
          This CV is available in PDF format. If you're using a screen reader or
          need an alternative format, you can:
        </p>
        <ul>
          <li>
            Download the PDF using the button above to view it with your
            preferred PDF reader
          </li>
          <li>Contact me at your@email.com for an alternative format</li>
        </ul>
      </div>
    </div>

    <script>
      // Configure PDF.js worker
      pdfjsLib.GlobalWorkerOptions.workerSrc =
        "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

      // Function to render the PDF
      async function renderPDF() {
        try {
          const loadingTask = pdfjsLib.getDocument("assets/pdf/cv.pdf");
          const pdf = await loadingTask.promise;

          // Get the first page
          const page = await pdf.getPage(1);

          // Prepare canvas for rendering
          const canvas = document.getElementById("pdf-canvas");
          const context = canvas.getContext("2d");

          // Calculate scale to fit the container width while maintaining aspect ratio
          const container = document.getElementById("pdf-container");
          const desiredWidth = container.clientWidth;
          const viewport = page.getViewport({ scale: 1 });
          const scale = desiredWidth / viewport.width;
          const scaledViewport = page.getViewport({ scale });

          // Set canvas dimensions
          canvas.width = scaledViewport.width;
          canvas.height = scaledViewport.height;

          // Render PDF page
          const renderContext = {
            canvasContext: context,
            viewport: scaledViewport,
          };

          await page.render(renderContext);
        } catch (error) {
          console.error("Error rendering PDF:", error);
          document.getElementById("error-message").style.display = "block";
        }
      }

      // Render PDF when page loads
      window.addEventListener("load", renderPDF);
    </script>
  </body>
</html>
